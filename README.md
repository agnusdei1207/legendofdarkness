# 어둠의전설 M (Legend of Darkness M)

어둠의전설 스타일의 **완전한 온라인 픽셀 RPG 게임**

**Rust + Leptos 0.8 + Axum 0.8 + SQLx + PostgreSQL**

## 🎮 게임 특징

### 핵심 시스템
- ✅ **5개 직업**: 전사, 도적, 마법사, 성직자, 무도가
- ✅ **1서클 시스템**: 레벨 1-11 성장 구간
- ✅ **틱(Tick) 시스템**: 15초마다 HP/MP 자동 회복 (물약 없음)
- ✅ **스탯 시스템**: STR, DEX, INT, VIT, WIS
- ✅ **스킬 시스템**: 직업별 고유 마법/기술
- ✅ **전투 시스템**: 아이소메트릭(쿼터뷰) 액션, 타겟팅
- ✅ **몬스터 AI**: 선공/비선공, 추격
- ✅ **경제 시스템**: 몬스터 골드 드롭, 마을 상점 이용
- ✅ **아이템 시스템**: 장비 착용 (무기, 갑옷, 악세사리)

### 비주얼 & 테마
- 🎨 **다크 판타지**: 어둠의전설(Legend of Darkness) 스타일의 묵직하고 어두운 분위기
- 🎨 **아이소메트릭 뷰**: 90년대 클래식 RPG 시점
- 🎨 **SD 캐릭터**: 2등신 픽셀 캐릭터 (남/녀 성별 구분)
- 🎨 **레트로 UI**: 고딕 스타일의 돌 질감 인터페이스
- 🎨 **폰트**: Press Start 2P (레트로 감성)

## 🛠 기술 스택

| 분류 | 기술 | 버전 |
|------|------|------|
| **프론트엔드** | Leptos | 0.8 |
| **백엔드** | Axum | 0.8 |
| **데이터베이스** | PostgreSQL | 16 (Alpine) |
| **ORM** | SQLx | 0.8 |
| **언어** | Rust | 1.85+ (nightly) |
| **개발 환경** | Docker Compose | - |

## 📋 필수 요구사항

- Docker
- Docker Compose

**로컬에 아무것도 설치하지 않아도 됩니다!**

## 🚀 빠른 시작

### 1. 환경 변수 설정

```bash
cp .env.example .env
```

### 2. 전체 스택 시작

```bash
# 전체 서비스 시작 (DB + 게임 서버)
docker compose up --build
```

### 3. 게임 접속

- **게임**: http://localhost:3002
- **DB 관리**: http://localhost:8081

### 서비스별 실행

```bash
# DB만 시작
docker compose up -d db adminer

# 개발 서버 빌드
docker compose build app

# 개발 서버 실행
docker compose up app
```

## 🎯 게임 조작법

### 이동
- `W` 또는 `↑` - 위로 이동
- `S` 또는 `↓` - 아래로 이동
- `A` 또는 `←` - 왼쪽으로 이동
- `D` 또는 `→` - 오른쪽으로 이동
- 대각선 이동 지원 (키 조합)

### UI 토글
- `C` - 캐릭터 창 (스탯/정보)
- `I` - 인벤토리 창
- `K` - 스킬 창
- `Space` - 공격 / 상호작용

## 📁 프로젝트 구조

```
legend/
├── src/
│   ├── main.rs                 # 서버 엔트리 (Axum 0.8)
│   ├── lib.rs                  # 라이브러리 엔트리 (WASM)
│   ├── app.rs                  # Leptos 앱 라우팅
│   │
│   ├── domain/                 # 도메인 주도 설계(DDD) 구조
│   │   ├── character/          # 캐릭터/직업 도메인
│   │   ├── item/               # 아이템/인벤토리 도메인
│   │   ├── skill/              # 스킬/마법 도메인
│   │   ├── map/                # 맵/이동 도메인
│   │   └── shared/             # 공통 모델 (Stats, Position)
│   │
│   ├── game/                   # 게임 로직 (클라이언트)
│   │   ├── canvas.rs           # 캔버스 렌더링 (Sprite/Tile)
│   │   └── mod.rs              # 게임 루프 및 상태 관리
│   │
│   └── components/             # UI 컴포넌트
│       ├── hud.rs              # HUD (HP/MP 바)
│       ├── inventory_window.rs # 인벤토리 윈도우
│       └── skill_window.rs     # 스킬 윈도우
│
├── migrations/                 # DB 마이그레이션 (초기 데이터 포함)
├── style/
│   └── main.css                # 다크 판타지 테마 CSS
│
└── public/
    └── assets/                 # 게임 에셋
        ├── characters/         # 직업별 스프라이트 (남/녀)
        ├── monsters/           # 몬스터 스프라이트
        └── inventory_bg.png    # UI 텍스처
```

## 🗄️ 데이터베이스 스키마

### 주요 테이블

#### `classes` - 직업
- 전사, 도적, 마법사, 성직자, 무도가
- 기본 스탯 정의 (Legend of Darkness 스타일)

#### `players` - 플레이어
- 닉네임, 성별(Male/Female), 직업
- 레벨(1-11 서클), 경험치
- HP/MP (틱 시스템으로 회복)

#### `skills` - 스킬/마법
- 직업별 고유 기술
- MP 소모, 데미지 공식

#### `items` - 아이템
- 무기, 방어구, 악세서리
- 몬스터 드롭 및 상점 구매

#### `monsters` - 몬스터
- 다크 판타지 몬스터 (쥐, 박쥐, 스켈레톤, 코볼트...)
- AI 및 스탯

## 🎨 직업별 특징 (1서클)

### 전사 (Warrior)
- **특징**: 강인한 체력, 근접 파괴력
- **주스탯**: STR(힘), CON(체력)

### 도적 (Rogue)
- **특징**: 기습, 빠른 공격, 크리티컬
- **주스탯**: DEX(민첩)

### 마법사 (Mage)
- **특징**: 강력한 원소 마법, 낮은 체력
- **주스탯**: INT(지력), WIS(지혜)

### 성직자 (Cleric)
- **특징**: 회복 마법, 보호, 언데드 퇴치
- **주스탯**: WIS(지혜), INT(지력)

### 무도가 (Martial Artist)
- **특징**: 맨손 격투, 화려한 연계기
- **주스탯**: STR(힘), CON(체력), DEX(민첩)

## 💡 개발 팁

### 컨테이너 내부 접속

```bash
docker exec -it legend-dev bash
```

### 데이터베이스 마이그레이션

```bash
# 컨테이너 내부에서
sqlx migrate run
```

### 로그 확인

```bash
docker compose logs -f app
```

### 빌드만 (프로덕션)

```bash
cargo leptos build --release
```

## 🔧 포트 설정

| 서비스 | 포트 | 설명 |
|--------|------|------|
| 게임 서버 | 3002 | Leptos SSR |
| 핫 리로드 | 3003 | 개발 모드 자동 새로고침 |
| PostgreSQL | 5433 | 데이터베이스 |
| Adminer | 8081 | DB 관리 도구 |

## 🎯 로드맵

### 다음 업데이트

- [ ] **멀티플레이어**: WebSocket 실시간 동기화
- [ ] **채팅 시스템**: 플레이어 간 채팅
- [ ] **파티 시스템**: 파티 구성 및 공유 경험치
- [ ] **길드 시스템**: 길드 생성 및 길드전
- [ ] **PVP 시스템**: 플레이어 간 전투
- [ ] **랭킹 시스템**: 레벨, 재화 랭킹
- [ ] **거래 시스템**: 플레이어 간 아이템 거래
- [ ] **이벤트 시스템**: 시간 제한 이벤트
- [ ] **업적 시스템**: 업적 달성시 보상
- [ ] **펫 시스템**: 동반 펫

### 기술 개선

- [ ] **에셋 로딩**: 실제 픽셀 스프라이트 시트
- [ ] **사운드**: BGM 및 효과음
- [ ] **파티클**: 스킬 이펙트
- [ ] **애니메이션**: 캐릭터 이동/공격 애니메이션
- [ ] **맵 에디터**: 맵 제작 도구
- [ ] **모바일 최적화**: 터치 컨트롤

## 🤝 기여

이슈 및 PR은 언제나 환영합니다!

## 📝 라이선스

이 프로젝트는 학습 및 포트폴리오 목적으로 제작되었습니다.

---

**Made with 🦀 Rust + ⚡ Leptos 0.8 + 🚀 Axum 0.8 + 🐘 PostgreSQL**

**어둠의전설의 감성을 현대적인 웹 기술로 재현**
# legend
